generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                   Int          @id @default(autoincrement())
  name                 String
  email                String       @unique
  password             String
  logged_in            Boolean
  user_token           String
  token_expiration     DateTime     @default(now())
  profile_picture_path String       @default("src/uploads/676-6764065_default-profile-picture-transparent-hd-png-download.png")
  disciplines          Discipline[]
  materials            Material[]
  messages             Message[]
  reminders            Reminder[]
  student              Student?
  teacher              Teacher?
}

model Student {
  userId Int  @id
  user   User @relation(fields: [userId], references: [id])
}

model Teacher {
  userId Int  @id
  user   User @relation(fields: [userId], references: [id])
}

model Reminder {
  id          Int      @id @default(autoincrement())
  userId      Int
  created_at  DateTime @default(now())
  title       String
  description String
  due_date    DateTime
  user        User     @relation(fields: [userId], references: [id])
}

model Discipline {
  id     Int     @id @default(autoincrement())
  userId Int
  name   String
  user   User    @relation(fields: [userId], references: [id])
  topics Topic[]
}

model Topic {
  id            Int        @id @default(autoincrement())
  discipline_id Int
  materials     Material[]
  summaries     Summary[]
  discipline    Discipline @relation(fields: [discipline_id], references: [id])
}

model Message {
  id       Int    @id @default(autoincrement())
  userId   Int?
  topic_id Int
  content  String
  title    String
  user     User?  @relation(fields: [userId], references: [id])
}

model Summary {
  id       Int    @id @default(autoincrement())
  content  String
  title    String
  topic_id Int
  topic    Topic  @relation(fields: [topic_id], references: [id])
}

model Material {
  id        Int    @id @default(autoincrement())
  title     String
  file_type String
  file_path String
  userId    Int
  topic_id  Int
  topic     Topic  @relation(fields: [topic_id], references: [id])
  user      User   @relation(fields: [userId], references: [id])
}
